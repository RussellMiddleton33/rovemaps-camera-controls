{"version":3,"file":"main-DcQQWBCM.js","sources":["../../src/main.ts"],"sourcesContent":["import * as THREE from 'three';\nimport { CameraController } from '../../../src/core/cameraController';\n\nconst canvas = document.getElementById('c') as HTMLCanvasElement;\nconst overlay = document.getElementById('overlay')!;\n\nlet renderer = new THREE.WebGLRenderer({ canvas, antialias: true });\nrenderer.setPixelRatio(window.devicePixelRatio || 1);\n\nconst scene = new THREE.Scene();\nscene.background = new THREE.Color(0x111111);\nconst camera = new THREE.PerspectiveCamera(60, 1, 0.1, 100000);\n\nconst grid = new THREE.GridHelper(1000, 100, 0x444444, 0x222222);\nscene.add(grid);\n\n// Debug gizmos: world axes at center, camera axes at center, pointer anchor, velocity arrow\nconst gizmoGroup = new THREE.Group();\nscene.add(gizmoGroup);\n\nfunction makeArrow(dir: THREE.Vector3, color: number, len = 80) {\n  return new THREE.ArrowHelper(dir.clone().normalize(), new THREE.Vector3(), len, color, 12, 6);\n}\n\nconst worldXArrow = makeArrow(new THREE.Vector3(1, 0, 0), 0xff0000);\nconst worldZArrow = makeArrow(new THREE.Vector3(0, 0, 1), 0x0000ff);\nconst camRightArrow = makeArrow(new THREE.Vector3(1, 0, 0), 0xff00ff); // magenta\nconst camFwdArrow = makeArrow(new THREE.Vector3(0, 0, 1), 0xffaa00);   // orange (distinct from green)\ngizmoGroup.add(worldXArrow, worldZArrow, camRightArrow, camFwdArrow);\n\nconst anchorSphere = new THREE.Mesh(\n  new THREE.SphereGeometry(3, 16, 16),\n  new THREE.MeshBasicMaterial({ color: 0xffff00 })\n);\nscene.add(anchorSphere);\n\nconst velArrow = makeArrow(new THREE.Vector3(1, 0, 0), 0x00ff00, 60);\nscene.add(velArrow);\n\n// Bounding box visualization (red outline)\nconst boundsHelper = new THREE.Box3Helper(new THREE.Box3(), 0xff0000);\nboundsHelper.visible = false;\nscene.add(boundsHelper);\n\nconst boxGeo = new THREE.BoxGeometry(20, 20, 20);\nfor (let i = 0; i < 30; i++) {\n  const m = new THREE.MeshStandardMaterial({ color: new THREE.Color().setHSL(i / 30, 0.6, 0.5) });\n  const mesh = new THREE.Mesh(boxGeo, m);\n  mesh.position.set((Math.random() - 0.5) * 500, 10, (Math.random() - 0.5) * 500);\n  scene.add(mesh);\n}\n\nconst light = new THREE.DirectionalLight(0xffffff, 1);\nlight.position.set(100, 200, 100);\nscene.add(light);\nscene.add(new THREE.AmbientLight(0x404040));\n\nlet controller: CameraController;\nlet currentHandlers = {\n  around: true,\n  coop: false,\n  keyboard: true,\n  dblclick: true,\n  boxzoom: true,\n  rubber: 0,\n  invertZoom: false,\n  invertPitch: false,\n  // Default: natural clockwise twist; checkbox toggles invert\n  invertTwist: false,\n  invertPanY: false,\n  recenterOnDown: false,\n  invertInertiaY: false,\n  invertInertiaX: false,\n  anchorTightness: 1,\n  antialias: true,\n  maxPitch: 80,\n  maxZoom: 3,\n  minZoom: 0,\n  rightDragPan: false,\n  // Touch rotation tuning\n  touchRotateStart: 1.0,\n  touchRotateContinue: 0.5,\n  touchRotateDebounce: 100,\n  mobileProfile: false,\n};\n\nfunction buildController() {\n  // Preserve current camera state when rebuilding handlers/renderer\n  const prev = controller ? {\n    center: controller.getCenter(),\n    zoom: controller.getZoom(),\n    bearing: controller.getBearing(),\n    pitch: controller.getPitch(),\n    roll: controller.getRoll(),\n    padding: controller.getPadding(),\n  } : null;\n\n  if (controller) controller.dispose();\n  // Rebuild renderer based on current handlers (avoid referencing toolbar before init)\n  rebuildRenderer(currentHandlers.antialias);\n  // Detect touch-capable device; always favor Touch Profile when touch is present\n  const isTouch = typeof window !== 'undefined' && (('ontouchstart' in window) || (navigator.maxTouchPoints > 0));\n  if (isTouch) currentHandlers.mobileProfile = true;\n  const touchProfile = currentHandlers.mobileProfile ? {\n    rotateThresholdDeg: 0.5,\n    pitchThresholdPx: 12,\n    zoomThreshold: 0.04,\n  } : {} as any;\n  controller = new CameraController({\n    camera,\n    domElement: renderer.domElement,\n    maxPitch: currentHandlers.maxPitch,\n    maxZoom: currentHandlers.maxZoom,\n    minZoom: currentHandlers.minZoom,\n    handlers: {\n      scrollZoom: {\n        around: currentHandlers.around ? 'pointer' : 'center',\n        cooperative: currentHandlers.coop,\n        onCoopGestureHint: showCoopHint,\n        zoomSign: currentHandlers.invertZoom ? -1 : 1,\n        anchorTightness: currentHandlers.anchorTightness,\n      },\n      touch: {\n        ...touchProfile,\n        rotateStartThresholdDeg: currentHandlers.touchRotateStart,\n        rotateContinueThresholdDeg: currentHandlers.touchRotateContinue,\n        rotateDebounceMs: currentHandlers.touchRotateDebounce,\n        anchorTightness: currentHandlers.anchorTightness,\n        panYSign: currentHandlers.invertPanY ? -1 : 1,\n        recenterOnGestureStart: currentHandlers.recenterOnDown,\n        inertiaPanYSign: currentHandlers.invertInertiaY ? -1 : 1,\n        inertiaPanXSign: currentHandlers.invertInertiaX ? -1 : 1,\n        rotateSign: currentHandlers.invertTwist ? -1 : 1,\n      },\n      rightButtonPan: currentHandlers.rightDragPan,\n      mousePan: {\n        panYSign: currentHandlers.invertPanY ? -1 : 1,\n        recenterOnPointerDown: currentHandlers.recenterOnDown,\n        inertiaPanYSign: currentHandlers.invertInertiaY ? -1 : 1,\n        inertiaPanXSign: currentHandlers.invertInertiaX ? -1 : 1,\n        anchorTightness: currentHandlers.anchorTightness,\n      },\n      // Enable right-drag rotate/pitch when rightButtonPan is false\n      mouseRotatePitch: {\n        pitchSign: currentHandlers.invertPitch ? -1 : 1,\n        rotateSign: currentHandlers.invertTwist ? -1 : 1,\n        recenterOnPointerDown: currentHandlers.recenterOnDown && currentHandlers.around,\n        anchorTightness: currentHandlers.anchorTightness,\n      },\n      // removed duplicate touch block (merged above)\n      // Safari trackpad twist: now uses consistent sign convention with other handlers\n      safariGestures: { enabled: true, rotateSign: currentHandlers.invertTwist ? -1 : 1, zoomSign: currentHandlers.invertZoom ? -1 : 1 },\n      keyboard: currentHandlers.keyboard,\n      dblclick: currentHandlers.dblclick,\n      boxZoom: currentHandlers.boxzoom,\n      rubberbandStrength: currentHandlers.rubber,\n    },\n  });\n  // Restore previous camera if available; otherwise use a sensible default\n  if (prev) {\n    controller.jumpTo({ center: prev.center, zoom: prev.zoom, bearing: prev.bearing, pitch: prev.pitch, roll: prev.roll, padding: prev.padding });\n  } else {\n    controller.jumpTo({ center: { x: 0, y: 0 }, zoom: 1.5, bearing: 0, pitch: 45 });\n  }\n  controller.on('renderFrame', () => updateOverlay());\n  controller.on('move', () => updateOverlay());\n}\nbuildController();\n\nconst toolbar = {\n  zoomIn: document.getElementById('btn-zoom-in')!,\n  zoomOut: document.getElementById('btn-zoom-out')!,\n  rotateLeft: document.getElementById('btn-rotate-left')!,\n  rotateRight: document.getElementById('btn-rotate-right')!,\n  pitchUp: document.getElementById('btn-pitch-up')!,\n  pitchDown: document.getElementById('btn-pitch-down')!,\n  rubber: document.getElementById('rubberband') as HTMLInputElement,\n  aroundPointer: document.getElementById('around-pointer') as HTMLInputElement,\n  cooperative: document.getElementById('cooperative') as HTMLInputElement,\n  keyboard: document.getElementById('keyboard') as HTMLInputElement,\n  dblclick: document.getElementById('dblclick') as HTMLInputElement,\n  boxzoom: document.getElementById('boxzoom') as HTMLInputElement,\n  antialias: document.getElementById('antialias') as HTMLInputElement,\n  invertZoom: document.getElementById('invert-zoom') as HTMLInputElement,\n  invertPitch: document.getElementById('invert-pitch') as HTMLInputElement,\n  invertTwist: document.getElementById('invert-twist') as HTMLInputElement,\n  rightDragPan: document.getElementById('right-drag-pan') as HTMLInputElement,\n  invertPanY: document.getElementById('invert-pany') as HTMLInputElement,\n  recenterOnDown: document.getElementById('recenter-down') as HTMLInputElement,\n  invertInertiaY: document.getElementById('invert-inertia-y') as HTMLInputElement,\n  invertInertiaX: document.getElementById('invert-inertia-x') as HTMLInputElement,\n  anchorTight: document.getElementById('anchor-tight') as HTMLInputElement,\n  showDebug: document.getElementById('show-debug') as HTMLInputElement,\n  fly: document.getElementById('btn-fly')!,\n  fit: document.getElementById('btn-fit')!,\n  maxPitch: document.getElementById('max-pitch') as HTMLInputElement,\n  maxZoom: document.getElementById('max-zoom') as HTMLInputElement,\n  minZoom: document.getElementById('min-zoom') as HTMLInputElement,\n  mobileProfile: document.getElementById('mobile-profile') as HTMLInputElement,\n  touchRotStart: document.getElementById('touch-rot-start') as HTMLInputElement,\n  touchRotCont: document.getElementById('touch-rot-cont') as HTMLInputElement,\n  touchRotDebounce: document.getElementById('touch-rot-debounce') as HTMLInputElement,\n};\n\n// Sync initial UI state with defaults so toggling works as expected\ntoolbar.invertTwist.checked = currentHandlers.invertTwist;\n\ntoolbar.zoomIn.addEventListener('click', () => controller.zoomIn(0.5, { around: toolbar.aroundPointer.checked ? 'pointer' : 'center' }));\ntoolbar.zoomOut.addEventListener('click', () => controller.zoomOut(0.5, { around: toolbar.aroundPointer.checked ? 'pointer' : 'center' }));\ntoolbar.rotateLeft.addEventListener('click', () => controller.rotateBy(-10, { around: toolbar.aroundPointer.checked ? 'pointer' : 'center' }));\ntoolbar.rotateRight.addEventListener('click', () => controller.rotateBy(10, { around: toolbar.aroundPointer.checked ? 'pointer' : 'center' }));\ntoolbar.pitchUp.addEventListener('click', () => controller.pitchBy(5, { around: toolbar.aroundPointer.checked ? 'pointer' : 'center' }));\ntoolbar.pitchDown.addEventListener('click', () => controller.pitchBy(-5, { around: toolbar.aroundPointer.checked ? 'pointer' : 'center' }));\ntoolbar.rubber.addEventListener('input', () => { currentHandlers.rubber = parseFloat(toolbar.rubber.value); buildController(); });\ntoolbar.aroundPointer.addEventListener('change', () => { currentHandlers.around = toolbar.aroundPointer.checked; buildController(); });\ntoolbar.cooperative.addEventListener('change', () => { currentHandlers.coop = toolbar.cooperative.checked; buildController(); });\ntoolbar.keyboard.addEventListener('change', () => { currentHandlers.keyboard = toolbar.keyboard.checked; buildController(); });\ntoolbar.dblclick.addEventListener('change', () => { currentHandlers.dblclick = toolbar.dblclick.checked; buildController(); });\ntoolbar.boxzoom.addEventListener('change', () => { currentHandlers.boxzoom = toolbar.boxzoom.checked; buildController(); });\ntoolbar.antialias.addEventListener('change', () => { currentHandlers.antialias = toolbar.antialias.checked; buildController(); });\ntoolbar.invertZoom.addEventListener('change', () => { currentHandlers.invertZoom = toolbar.invertZoom.checked; buildController(); });\ntoolbar.invertPitch.addEventListener('change', () => { currentHandlers.invertPitch = toolbar.invertPitch.checked; buildController(); });\ntoolbar.invertTwist.addEventListener('change', () => { currentHandlers.invertTwist = toolbar.invertTwist.checked; buildController(); });\ntoolbar.rightDragPan.addEventListener('change', () => { currentHandlers.rightDragPan = toolbar.rightDragPan.checked; buildController(); });\ntoolbar.invertPanY.addEventListener('change', () => { currentHandlers.invertPanY = toolbar.invertPanY.checked; buildController(); });\ntoolbar.recenterOnDown.addEventListener('change', () => { currentHandlers.recenterOnDown = toolbar.recenterOnDown.checked; buildController(); });\ntoolbar.invertInertiaY.addEventListener('change', () => { currentHandlers.invertInertiaY = toolbar.invertInertiaY.checked; buildController(); });\ntoolbar.invertInertiaX.addEventListener('change', () => { currentHandlers.invertInertiaX = toolbar.invertInertiaX.checked; buildController(); });\ntoolbar.anchorTight.addEventListener('input', () => { currentHandlers.anchorTightness = parseFloat(toolbar.anchorTight.value); buildController(); });\ntoolbar.showDebug.addEventListener('change', () => { updateDebugVisibility(toolbar.showDebug.checked); });\ntoolbar.maxPitch.addEventListener('change', () => { currentHandlers.maxPitch = Math.max(1, Math.min(89, parseFloat(toolbar.maxPitch.value))); buildController(); });\ntoolbar.maxZoom.addEventListener('change', () => { currentHandlers.maxZoom = parseFloat(toolbar.maxZoom.value); buildController(); });\ntoolbar.minZoom.addEventListener('change', () => { currentHandlers.minZoom = parseFloat(toolbar.minZoom.value); buildController(); });\ntoolbar.mobileProfile.addEventListener('change', () => { currentHandlers.mobileProfile = toolbar.mobileProfile.checked; buildController(); });\ntoolbar.touchRotStart.addEventListener('change', () => { currentHandlers.touchRotateStart = parseFloat(toolbar.touchRotStart.value); buildController(); });\ntoolbar.touchRotCont.addEventListener('change', () => { currentHandlers.touchRotateContinue = parseFloat(toolbar.touchRotCont.value); buildController(); });\ntoolbar.touchRotDebounce.addEventListener('change', () => { currentHandlers.touchRotateDebounce = parseFloat(toolbar.touchRotDebounce.value); buildController(); });\n\ntoolbar.fly.addEventListener('click', () => {\n  const target = { x: (Math.random() - 0.5) * 400, y: (Math.random() - 0.5) * 400 };\n  const before = controller.getStateSnapshot();\n  controller.once('moveend', () => {\n    const after = controller.getStateSnapshot();\n    requestAnimationFrame(() => {\n      const afterFrame = controller.getStateSnapshot();\n      // no-op\n    });\n  });\n  controller.flyTo({ center: target, bearing: Math.random() * 360 - 180, pitch: 50, curve: 1.4, speed: 1.2, maxDuration: 2500 });\n});\n\ntoolbar.fit.addEventListener('click', () => {\n  const bounds = { min: { x: -150, y: -80 }, max: { x: 150, y: 80 } };\n  controller.fitBounds(bounds, { padding: { top: 20, right: 60, bottom: 20, left: 60 }, offset: { x: 80, y: -40 } });\n});\n\n// Reusable function to fit camera to a list of meshes\nfunction fitToMeshes(meshes: THREE.Mesh[]) {\n  if (meshes.length === 0) {\n    boundsHelper.visible = false;\n    return;\n  }\n\n  // Calculate bounding box from all meshes\n  const box3 = new THREE.Box3();\n  meshes.forEach((mesh) => {\n    const meshBox = new THREE.Box3().setFromObject(mesh);\n    box3.expandByPoint(meshBox.min);\n    box3.expandByPoint(meshBox.max);\n  });\n\n  // Update visual helper to show the calculated box\n  boundsHelper.box.copy(box3);\n  boundsHelper.visible = true;\n\n  // Convert to 2D bounds (Y-up: use X and Z from box3, ground is XZ plane)\n  const bounds = {\n    min: { x: box3.min.x, y: box3.min.z },\n    max: { x: box3.max.x, y: box3.max.z }\n  };\n\n  controller.fitBounds(bounds, { padding: { top: 20, right: 20, bottom: 20, left: 20 } });\n}\n\n// Find meshes in scene by hue range and fit to them\nfunction fitToColorRange(minHue: number, maxHue: number) {\n  const meshes: THREE.Mesh[] = [];\n\n  scene.traverse((obj) => {\n    if (obj instanceof THREE.Mesh && obj.material instanceof THREE.MeshStandardMaterial) {\n      const color = obj.material.color;\n      const hsl = { h: 0, s: 0, l: 0 };\n      color.getHSL(hsl);\n\n      if (hsl.h >= minHue && hsl.h < maxHue) {\n        meshes.push(obj);\n      }\n    }\n  });\n\n  fitToMeshes(meshes);\n}\n\n// Color-specific fit button handlers\ndocument.getElementById('btn-fit-red')?.addEventListener('click', () => fitToColorRange(0, 0.15));\ndocument.getElementById('btn-fit-yellow')?.addEventListener('click', () => fitToColorRange(0.15, 0.25));\ndocument.getElementById('btn-fit-green')?.addEventListener('click', () => fitToColorRange(0.25, 0.45));\ndocument.getElementById('btn-fit-cyan')?.addEventListener('click', () => fitToColorRange(0.45, 0.60));\ndocument.getElementById('btn-fit-blue')?.addEventListener('click', () => fitToColorRange(0.60, 0.75));\ndocument.getElementById('btn-fit-magenta')?.addEventListener('click', () => fitToColorRange(0.75, 1.0));\n\nfunction resize() {\n  const rect = canvas.getBoundingClientRect();\n  const dpr = Math.max(1, Math.min(3, window.devicePixelRatio || 1));\n  controller.setViewport({ width: rect.width, height: rect.height, devicePixelRatio: dpr });\n  camera.aspect = rect.width / rect.height;\n  camera.updateProjectionMatrix();\n  renderer.setPixelRatio(dpr);\n  renderer.setSize(rect.width, rect.height, false);\n}\n\nwindow.addEventListener('resize', resize);\nresize();\n\n// Mobile menu toggle\nconst menuBtn = document.getElementById('menu-toggle') as HTMLButtonElement;\nif (menuBtn) {\n  menuBtn.addEventListener('click', () => {\n    document.body.classList.toggle('menu-open');\n  });\n  // Auto-close menu when interacting with canvas\n  canvas.addEventListener('pointerdown', () => { document.body.classList.remove('menu-open'); }, { passive: true });\n}\n\nfunction updateOverlay() {\n  const c = controller.getCenter();\n  overlay.textContent = `center: ${c.x.toFixed(2)}, ${c.y.toFixed(2)}\\nzoom: ${controller.getZoom().toFixed(2)}\\n` +\n    `bearing: ${controller.getBearing().toFixed(2)}\\npitch: ${controller.getPitch().toFixed(2)}\\n` +\n    `roll: ${controller.getRoll().toFixed(2)}`;\n\n  // Update gizmos at center\n  const center3 = new THREE.Vector3(c.x, 0, c.y);\n  worldXArrow.position.copy(center3);\n  worldZArrow.position.copy(center3);\n  camRightArrow.position.copy(center3);\n  camFwdArrow.position.copy(center3);\n  const br = controller.getBearing() * Math.PI / 180;\n  const right = new THREE.Vector3(Math.cos(br), 0, Math.sin(br));\n  const fwd = new THREE.Vector3(-Math.sin(br), 0, Math.cos(br));\n  camRightArrow.setDirection(right);\n  camFwdArrow.setDirection(fwd);\n}\n\nfunction frame() {\n  renderer.render(scene, camera);\n  requestAnimationFrame(frame);\n}\nframe();\n\n// Expose for console debugging\n(window as any).THREE = THREE;\n(window as any).controller = controller!;\n\nfunction rebuildRenderer(aa: boolean) {\n  // Dispose and recreate renderer with AA toggle\n  try { renderer.dispose(); } catch {}\n  renderer = new THREE.WebGLRenderer({ canvas, antialias: aa });\n  const rect = canvas.getBoundingClientRect();\n  const dpr = Math.max(1, Math.min(3, window.devicePixelRatio || 1));\n  renderer.setPixelRatio(dpr);\n  renderer.setSize(rect.width, rect.height, false);\n}\n\n// Cooperative gestures hint (auto-hide)\nlet coopTimer: number | null = null;\nfunction showCoopHint() {\n  const el = document.getElementById('coop-hint')!;\n  el.removeAttribute('hidden');\n  if (coopTimer) window.clearTimeout(coopTimer);\n  coopTimer = window.setTimeout(() => { el.setAttribute('hidden', ''); }, 1400);\n}\n\n// Box zoom overlay via Shift+drag\nconst selectRect = document.getElementById('select-rect') as HTMLDivElement;\nlet selecting = false;\nlet startX = 0, startY = 0;\nrenderer.domElement.addEventListener('pointerdown', (e) => {\n  if (!toolbar.boxzoom.checked) return;\n  if (!e.shiftKey || e.button !== 0) return;\n  const rect = renderer.domElement.getBoundingClientRect();\n  startX = e.clientX - rect.left; startY = e.clientY - rect.top;\n  selecting = true;\n  selectRect.style.left = `${startX}px`;\n  selectRect.style.top = `${startY}px`;\n  selectRect.style.width = '0px'; selectRect.style.height = '0px';\n  selectRect.removeAttribute('hidden');\n});\n\n// Pointer anchor tracking and velocity visualization\nlet lastCenter = new THREE.Vector3(controller!.getCenter().x, 0, controller!.getCenter().y);\nlet lastTime = performance.now();\ncanvas.addEventListener('pointermove', (e) => {\n  const rect = canvas.getBoundingClientRect();\n  const pt = { x: e.clientX - rect.left, y: e.clientY - rect.top };\n  const gp = (controller.transform as any).groundFromScreen?.(pt) ?? null;\n  if (gp) anchorSphere.position.set(gp.gx, 0, gp.gz);\n});\n\ncontroller!.on('renderFrame', () => {\n  const now = performance.now();\n  const dt = Math.max(1 / 120, (now - lastTime) / 1000);\n  lastTime = now;\n  const c = controller.getCenter();\n  const curr = new THREE.Vector3(c.x, 0, c.y);\n  const delta = curr.clone().sub(lastCenter);\n  lastCenter.copy(curr);\n  // Velocity arrow (scaled)\n  const speed = delta.length() / dt;\n  const dir = delta.lengthSq() > 1e-9 ? delta.clone().normalize() : new THREE.Vector3(1, 0, 0);\n  velArrow.position.copy(curr);\n  velArrow.setDirection(dir);\n  velArrow.setLength(Math.min(200, speed * 50), 12, 6);\n});\n\nfunction updateDebugVisibility(show: boolean) {\n  [gizmoGroup, anchorSphere, velArrow].forEach(obj => obj.visible = show);\n}\n// Default off\nupdateDebugVisibility(false);\nwindow.addEventListener('pointermove', (e) => {\n  if (!selecting) return;\n  const rect = renderer.domElement.getBoundingClientRect();\n  const x = e.clientX - rect.left; const y = e.clientY - rect.top;\n  const left = Math.min(startX, x); const top = Math.min(startY, y);\n  const w = Math.abs(x - startX); const h = Math.abs(y - startY);\n  selectRect.style.left = `${left}px`; selectRect.style.top = `${top}px`;\n  selectRect.style.width = `${w}px`; selectRect.style.height = `${h}px`;\n});\nwindow.addEventListener('pointerup', (e) => {\n  if (!selecting) return;\n  selecting = false;\n  selectRect.setAttribute('hidden', '');\n  const rect = renderer.domElement.getBoundingClientRect();\n  const endX = e.clientX - rect.left; const endY = e.clientY - rect.top;\n  const x0 = Math.min(startX, endX), y0 = Math.min(startY, endY);\n  const x1 = Math.max(startX, endX), y1 = Math.max(startY, endY);\n  const w0 = controller.transform.screenToWorld({ x: x0, y: y0 });\n  const w1 = controller.transform.screenToWorld({ x: x1, y: y1 });\n  if (w0 && w1) {\n    controller.fitBounds({ min: { x: Math.min(w0.x, w1.x), y: Math.min(w0.y, w1.y) }, max: { x: Math.max(w0.x, w1.x), y: Math.max(w0.y, w1.y) } }, { padding: { top: 10, right: 10, bottom: 10, left: 10 } });\n  }\n});\n"],"names":["THREE.WebGLRenderer","THREE.Scene","THREE.Color","THREE.PerspectiveCamera","THREE.GridHelper","THREE.Group","THREE.ArrowHelper","THREE.Vector3","THREE.Mesh","THREE.SphereGeometry","THREE.MeshBasicMaterial","THREE.Box3Helper","THREE.Box3","THREE.BoxGeometry","THREE.MeshStandardMaterial","THREE.DirectionalLight","THREE.AmbientLight","_c","_b","_a"],"mappings":"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"}